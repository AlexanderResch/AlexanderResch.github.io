<html>
<head>
   <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
   <script src="https://unpkg.com/aframe-globe-component/dist/aframe-globe-component.min.js"></script>
   <script src="https://unpkg.com/aframe-geojson-component/dist/aframe-geojson-component.min.js"></script>
   <script src="https://cdn.rawgit.com/tizzle/aframe-orbit-controls-component/v0.1.14/dist/aframe-orbit-controls-component.min.js"></script>
   <script src="https://d3js.org/d3.v6.min.js"></script>
   <script src="https://d3js.org/d3-dsv.v2.min.js"></script>
   <script src="https://d3js.org/d3-fetch.v2.min.js"></script> 
   <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.0.0/dist/aframe-extras.min.js"></script>

</head>


<body>
   <a-scene vr-mode-ui="cardboardModeEnabled:true">
     <a-assets>
      <a-assets-item id='geo-json' src="assets/world-50m.v1.json"></a-asset-item>
      <img id="sky" src="assets/sky.jpg"/>
     </a-assets>

<a-entity id="rig" movement-controls position="0 0 25">
       <a-entity camera orbit-controls="target: #globus" look-controls="pointerLockEnabled: true">

     </a-entity>

     <a-sky src="#sky"></a-sky>

     
     <a-entity id ="globus" >
       <a-entity geometry="primitive: sphere; radius: 10" position="0 0 -25" material="color: yellow; shader: flat" 
         geojson="src: #geo-json; topologyObject: countries; projection: geoEquirectangular" >
       </a-entity>
         
        <a-entity  id="earth" rotation="0 -270 0" position="0 0 -25" scale="0.1 0.1 0.1" globe="globe-image-url: https://upload.wikimedia.org/wikipedia/commons/0/04/Solarsystemscope_texture_8k_earth_daymap.jpg;"></a-entity>
    </a-entity>

   </a-scene>




<script>
    
    const weightColor = d3.scaleSequentialSqrt(d3.interpolateYlOrRd)
        .domain([0, 14]);

    const globeEntity = document.getElementById('earth');
    function getWorldData() {
      d3.csv("Fussabdruck_konvertiert.csv").then(function (data) {
        
        globeEntity.setAttribute('globe', {
          pointsData: data,
          pointLat: data => data.Breitengrade,
          pointLng: data => data.Laengengrade,
          pointColor: data => weightColor(data.Oekologischer_Fussabdruck),
          pointAltitude: data => Math.sqrt(data.Oekologischer_Fussabdruck)*0.15,//*1e-3
          pointRadius: 0.3,
          labelsData: data,
          labelLat: data => data.Breitengrade,
          labelLng: data => data.Laengengrade,
          labelAltitude: data => Math.sqrt(data.Oekologischer_Fussabdruck)*0.15+0.001,//*1.001e-3
          labelDotRadius: 0.1,
          labelDotOrientation: () => 'bottom',
          labelColor: () => '#FFFFFF',
          labelText: data => data.Land,
          labelSize: 0.5,
          labelResolution: 5,
          desc: ({ data: data }) => '${data.Land} , Cases: ${(data.Oekologischer_Fussabdruck)}',
        });
    
      });
    }
    getWorldData();
</script>



</body>
</html>

<!--License-Information:-->
<!--In this software the A-Frame Globe-Component by Vasco Asturiano was used and modified-->
<!--https://github.com/vasturiano/aframe-globe-component-->
<!--Copyright (c) 2019 Vasco Asturiano-->